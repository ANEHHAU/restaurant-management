

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gọi món - Bàn [[${table.tableName}]]</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
    <style>
        :root { --red: #ee4d2d; }
        * { margin:0; padding:0; box-sizing:border-box; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
        body { background:#fff; padding-bottom:90px; }

        /* Header đỏ */
        .header {
            position:fixed; top:0; left:0; right:0; height:100px;
            background:var(--red); color:white; text-align:center;
            padding-top:30px; z-index:1000;
        }
        .header h1 { font-size:21px; font-weight:bold; }
        .header p { font-size:16px; opacity:0.9; }

        /* Tìm kiếm */
        .search {
            margin:110px 15px 10px; background:white; border-radius:12px;
            padding:14px 16px; box-shadow:0 2px 8px rgba(0,0,0,0.1);
            display:flex; align-items:center;
        }
        .search input { border:none; outline:none; flex:1; margin-left:12px; font-size:16px; }

        /* Danh sách món */
        .dish {
            display:flex; background:white; border-radius:16px;
            overflow:hidden; box-shadow:0 4px 12px rgba(0,0,0,0.08);
            margin:0 15px 12px;
        }
        .dish-img { width:110px; height:110px; object-fit:cover; }
        .dish-info { flex:1; padding:14px; display:flex; flex-direction:column; justify-content:space-between; }
        .dish-name { font-size:17px; font-weight:600; }
        .dish-price { font-size:19px; font-weight:bold; color:var(--red); }

        /* Nút thêm */
        .add-box { align-self:flex-end; margin:0 14px 14px 0; }
        .add-btn { width:38px; height:38px; background:var(--red); color:white; border:none; border-radius:50%; font-size:26px; cursor:pointer; }
        .qty-box { display:flex; align-items:center; background:white; border:2px solid var(--red); border-radius:50px; height:38px; }
        .qty-box button { width:38px; background:transparent; border:none; color:var(--red); font-size:22px; }
        .qty-box span { min-width:50px; text-align:center; font-weight:bold; color:var(--red); }

        /* Mobile Bar */
        .mobile-bar {
            position:fixed; bottom:0; left:0; right:0; background:white;
            border-top:1px solid #eee; padding:12px 20px; display:flex;
            justify-content:space-between; align-items:center; box-shadow:0 -4px 20px rgba(0,0,0,0.1); z-index:999;
        }
        .mobile-left { display:flex; align-items:center; cursor:pointer; }
        .mobile-icon {
            position:relative; width:56px; height:56px; background:var(--red);
            border-radius:50%; color:white; font-size:24px; display:flex;
            align-items:center; justify-content:center; margin-right:16px;
        }
        .mobile-badge {
            position:absolute; top:-8px; right:-8px; background:white; color:var(--red);
            width:26px; height:26px; border-radius:50%; font-weight:bold; font-size:14px;
            display:flex; align-items:center; justify-content:center;
        }
        .mobile-total { font-size:20px; font-weight:bold; color:var(--red); }
        .mobile-btns { display:flex; gap:10px; }
        .mobile-btn { padding:12px 20px; border-radius:50px; font-weight:bold; font-size:16px; border:none; color:white; }
        .send-btn { background:var(--red); }
        .history-btn { background:#333; }

        /* Popup modal - kéo được */
        .modal {
            position:fixed; inset:0; background:rgba(0,0,0,0.5); display:none;
            align-items:flex-end; justify-content:center; z-index:1000;
        }
        .modal.active { display:flex; }
        .modal-content {
            background:white; width:100%; max-width:500px; max-height:90vh;
            border-radius:20px 20px 0 0; overflow:hidden; animation:slideUp 0.35s ease;
        }
        @keyframes slideUp { from { transform:translateY(100%); } to { transform:translateY(0); } }
        .modal-header {
            padding:16px; background:#f8f9fa; font-weight:bold; font-size:18px;
            text-align:center; position:relative; border-bottom:1px solid #eee;
        }
        .modal-close { position:absolute; right:16px; top:14px; font-size:26px; color:#999; cursor:pointer; }
        .modal-body {
            padding:15px; max-height:60vh; overflow-y:auto;
        }
        .modal-item {
            display:flex; justify-content:space-between; padding:12px 0; border-bottom:1px solid #f0f0f0;
        }
        .item-name { flex:1; font-size:15px; }
        .item-total { color:var(--red); font-weight:600; }

        /* PC Sidebar */
        .sidebar { width:420px; background:white; border-radius:16px; box-shadow:0 4px 20px rgba(0,0,0,0.1); overflow:hidden; position:sticky; top:120px; }
        .sidebar-header { padding:16px; font-weight:bold; font-size:18px; border-bottom:1px solid #eee; display:flex; justify-content:space-between; }
        .tab-btn { background:none; border:none; color:#666; font-size:14px; cursor:pointer; }
        .tab-btn.active { color:var(--red); font-weight:bold; }
        .sidebar-content { padding:15px; min-height:300px; max-height:60vh; overflow-y:auto; }
        .total-row { padding:15px; border-top:1px solid #eee; display:flex; justify-content:space-between; font-size:18px; font-weight:bold; }

        @media (min-width: 992px) {
            .container { padding:0 30px; max-width:1400px; margin:0 auto; display:flex; gap:20px; margin-top:20px; }
            .dish-list { flex:1; }
            .mobile-bar { display:none; }
        }
        @media (max-width: 991px) {
            .sidebar { display:none; }
        }
    </style>
</head>
<body>

<!-- Header -->
<div class="header">
    <h1>GỌI MÓN</h1>
    <p>Bàn <span th:text="${table.tableName}"></span> • <span th:text="${order.customer?.fullName} ?: 'Quý khách'"></span></p>
</div>

<!-- Tìm kiếm -->
<div class="search">
    <i class="fas fa-search" style="color:#ccc;"></i>
    <input type="text" id="searchInput" placeholder="Tìm món tại quán..." onkeyup="filterDishes()">
</div>

<div class="container">
    <div class="dish-list">
        <div th:each="dish : ${dishes}" th:if="${dish.active}" class="dish" th:data-id="${dish.id}">
            <img th:src="@{'https://via.placeholder.com/110?text=' + ${dish.dishName}}" class="dish-img" alt="">
            <div class="dish-info">
                <div class="dish-name" th:text="${dish.dishName}"></div>

                <div class="dish-price"
                     th:text="${#numbers.formatInteger(dish.unitPrice, 3, 'COMMA')} + ' VNĐ'">
                </div>

            </div>
            <div class="add-box">
                <button class="add-btn" onclick="addToCart(this)">+</button>
                <div class="qty-box" style="display:none;">
                    <button onclick="changeQty(this,-1)">–</button>
                    <span class="qty">0</span>
                    <button onclick="changeQty(this,1)">+</button>
                </div>
            </div>
        </div>
    </div>

    <!-- PC Sidebar -->
    <div class="sidebar">
        <div class="sidebar-header">
            <span id="sidebarTitle">Giỏ hàng</span>
            <div>
                <button class="tab-btn active" id="cartTab" onclick="showCartTab()">Giỏ hàng</button>
                <button class="tab-btn" id="historyTab" onclick="loadHistoryFromServer()">Lịch sử</button>
            </div>
        </div>
        <div class="sidebar-content" id="sidebarContent"></div>
        <div class="total-row">
            <span>Tổng tiền</span>
            <span id="pcTotal">0đ</span>
        </div>
        <div style="padding:15px;" id="sendBtnContainer">
            <button style="width:100%; padding:14px; background:var(--red); color:white; border:none; border-radius:12px;"
                    onclick="submitOrder()" id="pcSendBtn" disabled>Gửi đơn hàng</button>
        </div>
    </div>
</div>

<!-- Mobile Bar -->
<div class="mobile-bar">
    <div class="mobile-left" onclick="openModal('cartModal')">
        <div class="mobile-icon">
            <i class="fas fa-shopping-cart"></i>
            <div class="mobile-badge" id="mobileCount">0</div>
        </div>
        <div class="mobile-total" id="mobileTotal">0đ</div>
    </div>
    <div class="mobile-btns">
        <button class="mobile-btn history-btn" onclick="loadHistoryFromServer(true)">Lịch sử</button>
        <button class="mobile-btn send-btn" id="mobileSendBtn" onclick="submitOrder()" disabled>Gửi đơn</button>
    </div>
</div>

<!-- Modal Giỏ hàng -->
<div class="modal" id="cartModal">
    <div class="modal-content">
        <div class="modal-header">Giỏ hàng <span class="modal-close" onclick="closeModal()">×</span></div>
        <div class="modal-body" id="mobileCartItems">Chưa chọn món nào</div>
        <div style="padding:15px; font-size:18px; font-weight:bold; text-align:center;">
            Tổng: <span id="modalTotal">0đ</span>
        </div>
    </div>
</div>

<!-- Modal Lịch sử (sẽ được fill bằng dữ liệu từ server) -->
<div class="modal" id="historyModal">
    <div class="modal-content">
        <div class="modal-header">Lịch sử món đã gọi <span class="modal-close" onclick="closeModal()">×</span></div>
        <div class="modal-body" id="historyItems">
            <p style="text-align:center; color:#999; padding:40px;">Đang tải...</p>
        </div>
    </div>
</div>

<script th:inline="javascript">
    const cart = {};
    const orderId = /*[[${order.id}]]*/;
    const tableId = /*[[${table.id}]]*/;

    function addToCart(btn) {
        const dish = btn.closest('.dish');
        const id = dish.dataset.id;
        cart[id] = (cart[id] || 0) + 1;
        updateDishUI(dish);
        updateAllDisplays();
    }

    function changeQty(btn, delta) {
        const dish = btn.closest('.dish');
        const id = dish.dataset.id;
        cart[id] += delta;
        if (cart[id] <= 0) delete cart[id];
        updateDishUI(dish);
        updateAllDisplays();
    }

    function updateDishUI(dish) {
        const qtyBox = dish.querySelector('.qty-box');
        const qtySpan = dish.querySelector('.qty');
        const addBtn = dish.querySelector('.add-btn');
        if (cart[dish.dataset.id]) {
            addBtn.style.display = 'none';
            qtyBox.style.display = 'flex';
            qtySpan.innerText = cart[dish.dataset.id];
        } else {
            addBtn.style.display = 'block';
            qtyBox.style.display = 'none';
        }
    }

    function updateAllDisplays() {
        let total = 0, count = 0;
        const pcContent = document.getElementById('sidebarContent');
        const mobileCart = document.getElementById('mobileCartItems');

        pcContent.innerHTML = '';
        mobileCart.innerHTML = '';

        Object.keys(cart).forEach(id => {
            const dish = document.querySelector(`.dish[data-id="${id}"]`);
            const name = dish.querySelector('.dish-name').innerText;
            const price = parseInt(dish.querySelector('.dish-price').innerText.replace(/[^0-9]/g,''));
            const qty = cart[id];
            count += qty;
            total += price * qty;

            const html = `<div class="modal-item"><div class="item-name">${name} ×${qty}</div><div class="item-total">${(price*qty).toLocaleString('vi-VN')}đ</div></div>`;
            pcContent.innerHTML += html;
            mobileCart.innerHTML += html;
        });

        if (count === 0) {
            const empty = '<p style="text-align:center;color:#999;padding:40px;">Chưa chọn món nào</p>';
            pcContent.innerHTML = empty;
            mobileCart.innerHTML = empty;
        }

        document.querySelectorAll('#pcTotal, #mobileTotal, #modalTotal').forEach(el => el.innerText = total.toLocaleString('vi-VN') + 'đ');
        document.getElementById('mobileCount').innerText = count;
        const disabled = count === 0;
        document.querySelectorAll('#pcSendBtn, #mobileSendBtn').forEach(b => b.disabled = disabled);
    }

    // Dùng đúng hàm bạn gửi để lấy lịch sử chính xác
    function loadHistoryFromServer(isMobile = false) {
        fetch(`/tables/${tableId}/bill`)
            .then(r => r.json())
            .then(bill => {
                const container = isMobile ? document.getElementById('historyItems') : document.getElementById('sidebarContent');
                if (!bill || !bill.items || bill.items.length === 0) {
                    container.innerHTML = '<p style="text-align:center;color:#999;padding:40px;">Chưa có món nào được gửi</p>';
                } else {
                    container.innerHTML = bill.items.map((i, idx) => `
                        <div class="modal-item">
                            <div class="item-name">${i.dishName || i.name || 'Không rõ'} ×${i.quantity}</div>
                            <div class="item-total">${(i.unitPrice * i.quantity).toLocaleString('vi-VN')}đ</div>
                        </div>
                    `).join('');
                }

                if (!isMobile) {
                    document.getElementById('sidebarTitle').innerText = 'Lịch sử món đã gọi';
                    document.getElementById('sendBtnContainer').style.display = 'none';
                    document.getElementById('cartTab').classList.remove('active');
                    document.getElementById('historyTab').classList.add('active');
                } else {
                    openModal('historyModal');
                }
            })
            .catch(() => {
                const container = isMobile ? document.getElementById('historyItems') : document.getElementById('sidebarContent');
                container.innerHTML = '<p style="color:red;text-align:center;">Lỗi tải dữ liệu</p>';
            });
    }

    function showCartTab() {
        document.getElementById('cartTab').classList.add('active');
        document.getElementById('historyTab').classList.remove('active');
        document.getElementById('sidebarTitle').innerText = 'Giỏ hàng';
        document.getElementById('sendBtnContainer').style.display = 'block';
        updateAllDisplays();
    }

    function openModal(id) {
        document.getElementById(id).classList.add('active');
    }

    function closeModal() {
        document.querySelectorAll('.modal').forEach(m => m.classList.remove('active'));
    }

    function submitOrder() {
        const items = Object.entries(cart).map(([id, qty]) => ({ dishId: +id, quantity: qty }));
        fetch('/customer/order/add-items', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ orderId, items })
        })
            .then(r => r.json())
            .then(res => {
                if (res.success) {
                    alert('Đã gửi món thành công!');
                    location.reload();
                } else alert('Lỗi: ' + res.message);
            });
    }

    function filterDishes() {
        const term = document.getElementById('searchInput').value.toLowerCase();
        document.querySelectorAll('.dish').forEach(d => {
            const name = d.querySelector('.dish-name').innerText.toLowerCase();
            d.style.display = name.includes(term) ? 'flex' : 'none';
        });
    }

    // Khởi tạo giỏ hiện tại
    updateAllDisplays();
</script>
</body>
</html>




<!--<!DOCTYPE html>-->
<!--<html xmlns:th="http://www.thymeleaf.org" lang="vi">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>Gọi món - Bàn [[${table.tableName}]]</title>-->
<!--    <style>-->
<!--        :root {-->
<!--            &#45;&#45;red: #ee4d2d;-->
<!--            &#45;&#45;gray: #f5f5f5;-->
<!--        }-->
<!--        * { margin:0; padding:0; box-sizing:border-box; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }-->
<!--        body { background:#fff; padding-bottom: 100px; }-->

<!--        /* Header đỏ */-->
<!--        .header {-->
<!--            position: fixed; top: 0; left: 0; right: 0; height: 100px;-->
<!--            background: var(&#45;&#45;red); color: white; text-align: center;-->
<!--            padding-top: 30px; z-index: 100;-->
<!--        }-->
<!--        .header h1 { font-size: 20px; font-weight: bold; margin-top: 15px; }-->
<!--        .header p { font-size: 16px; opacity: 0.9; }-->

<!--        /* Thanh tìm kiếm */-->
<!--        .search {-->
<!--            margin: 110px 15px 10px;-->
<!--            background: white; border-radius: 12px; padding: 14px 16px;-->
<!--            display: flex; align-items: center; box-shadow: 0 2px 8px rgba(0,0,0,0.1);-->
<!--        }-->
<!--        .search input {-->
<!--            border: none; outline: none; flex: 1; margin-left: 10px; font-size: 16px;-->
<!--        }-->

<!--        /* Danh sách món */-->
<!--        .dishes {-->
<!--            padding: 0 15px;-->
<!--        }-->
<!--        .dish {-->
<!--            background: white; border-radius: 16px; margin-bottom: 12px;-->
<!--            overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.08);-->
<!--            display: flex;-->
<!--        }-->
<!--        .dish-img {-->
<!--            width: 110px; height: 110px; object-fit: cover;-->
<!--        }-->
<!--        .dish-info {-->
<!--            flex: 1; padding: 12px;-->
<!--        }-->
<!--        .dish-name {-->
<!--            font-size: 17px; font-weight: 600; margin-bottom: 6px;-->
<!--        }-->
<!--        .dish-desc {-->
<!--            font-size: 13px; color: #888; line-height: 1.4; margin-bottom: 8px;-->
<!--        }-->
<!--        .dish-stats {-->
<!--            font-size: 12px; color: #aaa; margin-bottom: 8px;-->
<!--        }-->
<!--        .dish-price {-->
<!--            font-size: 19px; font-weight: bold; color: var(&#45;&#45;red);-->
<!--        }-->

<!--        /* Nút thêm món */-->
<!--        .add-box {-->
<!--            align-self: flex-end; margin: 0 12px 12px 0;-->
<!--        }-->
<!--        .add-btn {-->
<!--            width: 36px; height: 36px; background: var(&#45;&#45;red); color: white;-->
<!--            border: none; border-radius: 50%; font-size: 24px; cursor: pointer;-->
<!--        }-->
<!--        .qty-box {-->
<!--            display: flex; align-items: center; background: white; border: 2px solid var(&#45;&#45;red);-->
<!--            border-radius: 50px; overflow: hidden; height: 36px;-->
<!--        }-->
<!--        .qty-box button {-->
<!--            width: 36px; background: transparent; border: none; color: var(&#45;&#45;red); font-size: 20px;-->
<!--        }-->
<!--        .qty-box span {-->
<!--            min-width: 44px; text-align: center; font-weight: bold; color: var(&#45;&#45;red);-->
<!--        }-->

<!--        /* Giỏ hàng dưới cùng */-->
<!--        .cart-bar {-->
<!--            position: fixed; bottom: 0; left: 0; right: 0;-->
<!--            height: 80px; background: white; border-top: 1px solid #eee;-->
<!--            display: flex; align-items: center; justify-content: space-between;-->
<!--            padding: 0 20px; box-shadow: 0 -4px 20px rgba(0,0,0,0.1); z-index: 999;-->
<!--        }-->
<!--        .cart-left {-->
<!--            display: flex; align-items: center;-->
<!--        }-->
<!--        .cart-icon {-->
<!--            position: relative; width: 56px; height: 56px; background: var(&#45;&#45;red);-->
<!--            border-radius: 50%; display: flex; align-items: center; justify-content: center;-->
<!--            color: white; font-size: 24px; margin-right: 15px;-->
<!--        }-->
<!--        .cart-badge {-->
<!--            position: absolute; top: -8px; right: -8px; background: white; color: var(&#45;&#45;red);-->
<!--            width: 26px; height: 26px; border-radius: 50%; font-weight: bold; font-size: 14px;-->
<!--            display: flex; align-items: center; justify-content: center; border: 2px solid var(&#45;&#45;red) solid;-->
<!--        }-->
<!--        .cart-total {-->
<!--            font-size: 20px; font-weight: bold; color: var(&#45;&#45;red);-->
<!--        }-->
<!--        .order-btn {-->
<!--            background: var(&#45;&#45;red); color: white; border: none; padding: 14px 32px;-->
<!--            border-radius: 50px; font-size: 18px; font-weight: bold;-->
<!--        }-->
<!--        .order-btn:disabled {-->
<!--            background: #ccc; cursor: not-allowed;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->

<!--&lt;!&ndash; Header đỏ &ndash;&gt;-->
<!--<div class="header">-->
<!--    <h1>GỌI MÓN</h1>-->
<!--    <p>Bàn <span th:text="${table.tableName}"></span> • <span th:text="${order.customer?.fullName} ?: 'Quý khách'"></span></p>-->
<!--</div>-->

<!--&lt;!&ndash; Thanh tìm kiếm &ndash;&gt;-->
<!--<div class="search">-->
<!--    <i class="fas fa-search" style="color:#ccc;"></i>-->
<!--    <input type="text" placeholder="Tìm món tại quán..." id="searchInput" onkeyup="filterDishes()">-->
<!--</div>-->

<!--&lt;!&ndash; Danh sách món &ndash;&gt;-->
<!--<div class="dishes" id="dishContainer">-->
<!--    <div class="dish" th:each="dish : ${dishes}" th:if="${dish.active}" th:data-id="${dish.id}">-->
<!--        <img th:src="@{'https://via.placeholder.com/110?text=' + ${dish.dishName}}" class="dish-img" alt="dish">-->

<!--        <div class="dish-info">-->
<!--            <div class="dish-name" th:text="${dish.dishName}">Mì Quảng Full Topping</div>-->
<!--            <div class="dish-desc">Gồm mì, tôm, thịt, trứng, rau sống...</div>-->
<!--            <div class="dish-stats">5K+ đã bán • 98 lượt thích</div>-->
<!--            <div class="dish-price" th:text="${#numbers.formatCurrency(dish.unitPrice)}">85.000đ</div>-->
<!--        </div>-->

<!--        <div class="add-box">-->
<!--            <button class="add-btn" onclick="addOne(this)">+</button>-->
<!--            <div class="qty-box" style="display:none;">-->
<!--                <button onclick="changeQty(this,-1)">–</button>-->
<!--                <span class="qty">1</span>-->
<!--                <button onclick="changeQty(this,+1)">+</button>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->

<!--&lt;!&ndash; Giỏ hàng cố định dưới &ndash;&gt;-->
<!--<div class="cart-bar">-->
<!--    <div class="cart-left">-->
<!--        <div class="cart-icon">-->
<!--            <i class="fas fa-shopping-cart"></i>-->
<!--            <div class="cart-badge" id="cartCount">0</div>-->
<!--        </div>-->
<!--        <div>-->
<!--            <div style="font-size:14px; color:#888;">Tổng tiền</div>-->
<!--            <div class="cart-total" id="totalPrice">0đ</div>-->
<!--        </div>-->
<!--    </div>-->
<!--    <button class="order-btn" id="submitBtn" disabled onclick="submitOrder()">Gửi đơn hàng</button>-->
<!--</div>-->

<!--<script th:inline="javascript">-->
<!--    const cart = {}; // { dishId: quantity }-->

<!--    function addOne(btn) {-->
<!--        const dishDiv = btn.closest('.dish');-->
<!--        const dishId = dishDiv.dataset.id;-->
<!--        cart[dishId] = (cart[dishId] || 0) + 1;-->

<!--        btn.style.display = 'none';-->
<!--        dishDiv.querySelector('.qty-box').style.display = 'flex';-->
<!--        dishDiv.querySelector('.qty').innerText = cart[dishId];-->

<!--        updateCart();-->
<!--    }-->

<!--    function changeQty(btn, delta) {-->
<!--        const dishDiv = btn.closest('.dish');-->
<!--        const dishId = dishDiv.dataset.id;-->
<!--        cart[dishId] += delta;-->

<!--        if (cart[dishId] <= 0) {-->
<!--            delete cart[dishId];-->
<!--            dishDiv.querySelector('.qty-box').style.display = 'none';-->
<!--            dishDiv.querySelector('.add-btn').style.display = 'block';-->
<!--        } else {-->
<!--            dishDiv.querySelector('.qty').innerText = cart[dishId];-->
<!--        }-->
<!--        updateCart();-->
<!--    }-->

<!--    function updateCart() {-->
<!--        let count = Object.values(cart).reduce((a,b) => a + b, 0);-->
<!--        let total = 0;-->

<!--        document.querySelectorAll('.dish').forEach(d => {-->
<!--            const id = d.dataset.id;-->
<!--            if (cart[id]) {-->
<!--                const price = parseFloat(d.querySelector('.dish-price').innerText.replace(/[^0-9]/g,'')) * 1000;-->
<!--                total += price * cart[id];-->
<!--            }-->
<!--        });-->

<!--        document.getElementById('cartCount').innerText = count;-->
<!--        document.getElementById('totalPrice').innerText = total.toLocaleString('vi-VN') + 'đ';-->
<!--        document.getElementById('submitBtn').disabled = count === 0;-->
<!--    }-->

<!--    function submitOrder() {-->
<!--        const items = Object.entries(cart).map(([dishId, quantity]) => ({-->
<!--            dishId: parseInt(dishId),-->
<!--            quantity: quantity-->
<!--        }));-->

<!--        fetch('/customer/order/add-items', {-->
<!--            method: 'POST',-->
<!--            headers: { 'Content-Type': 'application/json' },-->
<!--            body: JSON.stringify({-->
<!--                orderId: /*[[${order.id}]]*/,-->
<!--                items: items-->
<!--            })-->
<!--        })-->
<!--            .then(r => r.json())-->
<!--            .then(res => {-->
<!--                if (res.success) {-->
<!--                    alert('Đã gửi món thành công! Nhân viên đang chuẩn bị');-->
<!--                    location.reload();-->
<!--                } else {-->
<!--                    alert('Lỗi: ' + res.message);-->
<!--                }-->
<!--            });-->
<!--    }-->

<!--    function filterDishes() {-->
<!--        const term = document.getElementById('searchInput').value.toLowerCase();-->
<!--        document.querySelectorAll('.dish').forEach(d => {-->
<!--            const name = d.querySelector('.dish-name').innerText.toLowerCase();-->
<!--            d.style.display = name.includes(term) ? 'flex' : 'none';-->
<!--        });-->
<!--    }-->
<!--</script>-->

<!--</body>-->
<!--</html>-->

<!--thêm cái xem món hiện tại nữa-->